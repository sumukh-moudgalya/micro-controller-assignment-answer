org 000h
mov a,#38h
acall command
//acall delay
mov a,#0eh
acall command
//acall delay
mov a,#01h
acall command
//acall delay
mov a,#06h
acall command
//acall delay
mov p1,#0ffh
data1:mov p3,#00h
mov a,p1
anl a,#01111111b
cjne a,#7fh,data1
//acall delay
data2:mov p3,#00h
mov a,p1
anl a,#01111111b
cjne a,#7fh,start
sjmp data2
//acall delay
start:mov p3,#11111110b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_0
mov p3,#11111101b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_1
mov p3,#11111011b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_2
mov p3,#11110111b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_3
mov p3,#11101111b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_4
mov p3,#11011111b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_5
mov p3,#10111111b
mov a,p1
anl a,#01111111b
cjne a,#7fh,row_6
row_0:mov dptr,#code0
sjmp find
row_1:mov dptr,#code1
sjmp find
row_2:mov dptr,#code2
sjmp find
row_3:mov dptr,#code3
sjmp find
row_4:mov dptr,#code4
sjmp find
row_5:mov dptr,#code5
sjmp find
row_6:mov dptr,#code6
sjmp find
find:mov r0,#07h
rrc a
jnc found
inc dptr
djnz r0,find
ljmp data1
found:mov a,#80h
acall command
//acall delay

clr a
movc a,@a+dptr
acall display
ljmp last
delay:mov r7,#10h
delay1:djnz r7,delay1
ret
command:mov p2,a
clr p0.2
clr p0.1
setb p0.0
clr p0.0
ret
display:mov p2,a
setb p0.2
clr p0.1
setb p0.0
clr p0.0
ret
org 300h
code0:db 'a','b','c','d','e','f','g'
code1:db 'h','i','j','k','l','m','n'
code2:db 'o','p','q','r','s','t','u'
code3:db 'v','w','x','y','z','0',1h
code4:db 2h,3h,4h,5h,6h,7h,8h
code5:db 9h,'@','#','$','%','^','&'
code6:db 'r'
last:
end
